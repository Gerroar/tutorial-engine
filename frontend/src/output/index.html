<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      --content-max-width: 750px;
    }
    .content {
      overflow-y: auto;
      padding: 0 5px 50px 5px;
      
    }

    main {

      margin-left: auto;
      margin-right: auto;
      max-width: var(--content-max-width);
    }

    hr {
      width: 80%;
      margin-left: 0px;
    }

    details summary { 
      cursor: pointer;
    }
    
    details summary > * {
      display: inline;
    }

    /*Classes for CallOuts*/

    .good,
    .bad,
    .warning {

      border-style: solid;
      border-width: 1px;
      border-radius: 4px;
      padding: 0 35px 0 35px;
      overflow-wrap: break-word;
    }

    .good {

      border-color: #6FAD6C;
      background-color: #8FE08B;
      color: #153b13;
    }

    .good hr {

      border: 1px solid #6eab6b;
    }

    .bad {

      border-color: #b04840;
      background-color: #e77f78;
      color: #450d09;
    }

    .bad hr {

      border: 1px solid #bf4f47;

    }

    .warning {

      border-color: #a7a343;
      background-color: #fffa64;
      color: #42401a;
    }

    .warning hr {

      border: 1px solid #bab64b;
    }
    /*Classes for CallOuts*/

    /*Classes for Spoiler*/

    .spoiler {
      border: 1px solid #999;
      padding: 2px;
      background: #cfc;
      padding: 0 35px 0 35px;
      overflow-wrap: break-word;
    }
    .spoiler-btn {
      user-select: none;
      font-size: 2rem;
    }
    .spoiler-btn:hover {
      cursor: pointer;
      color: #e00;
    }
    .spoiler-btn-bottom {
      width: 100%;
      text-align: right;
    }
    
    .spoiler-body {
      display: none;
      height: 0;
    }
    

    /*Classes for Spoiler*/
  </style>
  <title>Document</title>
</head>
<body>
<div id="content" class="content">
<main>
<h1>Tutorial Engine</h1><hr>

Something a little like <a href="https://doc.rust-lang.org/book/" target="_blank">https://doc.rust-lang.org/book/</a></br>

<h2>Light and Dark theme?</h2><hr>

<h2>Syntax Highlight</h2><hr>
<pre>
class Main {</br>
  public static void foo(){</br>
    var a = 5;</br>
  }</br>
}</br>
</pre>

<h2>Auto Output</h2><hr>

<pre>
mist whoami</br>
</pre>
<pre>["gr@mist-cloud.eu"]
</pre>


<h2>Code tabs</h2><hr>

<a href="file.ts" target="_blank">file.ts</a></br>
<pre>
function foo(){</br>
  let a = 5;</br>
}</br>
</pre>
<a href="file.java" target="_blank">file.java</a></br>
<pre>
class Main {</br>
  public static void foo(){</br>
    var a = 5;</br>
  }</br>
}</br>
</pre>

<h3>Besides that</h3>

<h2>Tabs Have Memory</h2><hr>

<a href="file2.ts" target="_blank">file2.ts</a></br>
<pre>
Other ts</br>
</pre>
<a href="file2.java" target="_blank">file2.java</a></br>
<pre>
Other java</br>
</pre>

<h2>Various</h2><hr>

<div class="warning"><h3>Callout</h3>

<p>fdsfdsfdsfdsfgdsgfdsgfdsgfsgfsgfsgrftrrvfsgrwgfdsgfwrwgfdgrwgrwegrwgrwgrwegrwegrwwwerrgewwwwwwwrgergwerr</p>

<hr>
<p>text</p>
</div>

<blockquote> Quotes</br>

 de</br>

 &mdash; Hello</br>

 &mdash; <i>Socrates</i></br>

 <b>testing gr</b></br>

Isosceles</br>
</blockquote>


Em &mdash; dash</br>

Line <i>Hello</i> of <i>Goodbye</i></br>

2<sup>3</sup></br>

Text formatting <i>italics</i> and <b>bold gfdfd dsad s</b>.</br>

Spoiler
<div class="spoiler"><div class="spoiler-btn spoiler-btn-top">Spoiler Title One</div>
<div class="spoiler-body" id="spoiler-body-1">
<p>fdsfdsfdsfdsfgdsgfdsgfdsgfsgfsgfsgrftrrvfsgrwgfdsgfwrwgfdgrwgrwegrwgrwgrwegrwegrwwwerrgewwwwwwwrgergwerr</p>
</div></div><div class="spoiler"><div class="spoiler-btn spoiler-btn-top">Spoiler Title Two</div>
<div class="spoiler-body" id="spoiler-body-2"><p>more text</p>
</div></div>

<ol id="ol-0"><li>Hello</li></br>
<ol><li>Bye</li></br>
<li>dfs</li></br>
</ol><li>there,</li></br>
<li>Sailor</li></br>
</ol></br>
Unordered list
<ul id="ul-0"><li>What is up</li></br>
  <ul><li>Nested</li></br>
    <ul><li>Deeply</li></br>
      <ul><li>In your hearth</li></br>
        <ul><li>Hello</li></br>
</ul></br></ul></br></ul></br></ul></br></ul></br>
Test with starting tab
  * Test</br>
</ul></br>
More tests
<ul id="ul-2"><li>a</li></br>
<li>b</li></br>
<li>c</li></br>
</ul></br>
Test of going back in nested lists
<ul id="ul-3"><li>a</li></br>
<li>b</li></br>
  <ul><li>c</li></br>
    <ul><li>d</li></br>
  </ul><li>e</li></br>
</ul></br></ul></br>
List with tab
<ul id="ul-4"><li>Hi</li></br>
</ul></br><h1>Good news everyone</h1><hr>

More tests
<ul id="ul-5"><li>This</li></br>
  <ul><li>Is</li></br>
</ul><li>A</li></br>
  <ul><li>Nested</li></br>
    <ul><li>List</li></br>
      <ul><li>okay</li></br>
</ul></br></ul></br></ul></br></ul></br>
Todo list
<div id="todo-1"><input type="checkbox" id="todo-component-1.1" name="todo-component-1.1" value="One"><label for="One">One</label><br></br>
<input type="checkbox" id="todo-component-1.2" name="todo-component-1.2" value="Two"><label for="Two">Two</label><br></br>
<input type="checkbox" id="todo-component-1.3" name="todo-component-1.3" value="Three"><label for="Three">Three</label><br></br>
</div></br>
Spoiler, collapsable section

Links [to other places](<a href="https://doc.rust-lang.org/book/#the-rust-programming-language" target="_blank">https://doc.rust-lang.org/book/#the-rust-programming-language</a>)</br>

<h2>Menu and Navigation</h2><hr>
Menu on the side
Menu is hidable
Next button
Prev button


[Next ->](chapter1/<a href="index.md" target="_blank">index.md</a>)</br>



</main></div>
<script>
    function toggleSpoilerAnimated(spoilerElement, isInvertedCollapse, isInvertedExpand, duration=1000) {
      let spoilerBody = spoilerElement.querySelector('.spoiler-body');
      let isCollapsing = spoilerElement.classList.contains('expanded');
      let heightBefore = spoilerElement.offsetHeight;
      
      let offsetBefore = window.scrollY;
      spoilerElement.classList.toggle('expanded', !isCollapsing);
      let isScrollRequired = ( isCollapsing && isInvertedCollapse) ||
                              (!isCollapsing && isInvertedExpand );
    
      
      // define a scroll func if one is required
      let scrollFunc = (isScrollRequired)
        ? () => {
          let heightNow = spoilerElement.offsetHeight;
          let heightDelta = heightNow - heightBefore;
          //console.log(heightNow, spoilerBody.offsetHeight, spoilerBody.style.height);
    
          window.scrollTo(0, offsetBefore + heightDelta);
        }
        : undefined;
      slideToggle(spoilerBody, !isCollapsing, { duration: duration, progress: scrollFunc, complete: scrollFunc });
    }
    
    for (let el of document.querySelectorAll('.spoiler-btn-top')) {
      el.addEventListener('click', e => toggleSpoilerAnimated(el.parentNode));
    }
    for (let el of document.querySelectorAll('.spoiler-btn-bottom')) {
      el.addEventListener('click', e => toggleSpoilerAnimated(el.parentNode, true, true));
    }
    
    function slideUp(element, options) { slideToggle(element, false, options); }
    function slideDown(element, options) { slideToggle(element, true, options); }
    
    // main sliding
    function slideToggle(element, isOpening, options) {
      let h0 = getHeight(element);
      
      // set up transition event listeners
      function resetStyle() {
        console.log("reset");
        //element.style.display = "none";
        //element.style.height = '';
      }
      
      const logType = e => console.log(e.type, e.propertyName);
      element.addEventListener('transitionend', (e) => {
        if (!isOpening) {
          resetStyle();
        }
        logType(e);
        }, true);
      element.addEventListener('transitioncancel', logType, true);
      element.addEventListener('transitionrun', logType, true);
      element.addEventListener('transitionstart', logType, true);
    
      
      // change: get to duration from css
      let duration = (options && options.duration) || 1000;
      element.style.transitionDuration = duration + "ms";
      element.style.transitionProperty = "height";
      let start = null;
      
      function step(timestamp) {
        if (!start) { start = timestamp; }
        let progress = 1.0 * (timestamp - start) / duration;
        let h1 = isOpening ? (h0 * progress) : (h0 * (1 - progress));
        if ((progress) < 1.0) {
          //element.style.height = h1 + 'px';
          if (options.progress) { options.progress(); }
          window.requestAnimationFrame(step);
        } else {
          //element.style.height = '';
          //element.style.overflow = '';
          //if (!isOpening) { element.style.display = 'none'; }
          console.log("here");
          if (!isOpening) { 
            // reset height so that h0 can be calculated again
            // OLD STYLE RESET
            // element.style.display = "none";
            // element.style.height = '';
    
          }
          //if (options.complete) { options.complete(); }
        }
      }
      
      // toggle un-hide
      element.style.display = 'block';
      // changed:  // timeout due to mdn ...
      setTimeout(() => {
        //element.style.height = 0;
        if (!isOpening) {
          element.style.height = "0px";
          console.log("going down");
        } else {
            console.log("h0 is", h0 + "px");
            // TODO the h0 from the getHeight hack needs to be used here
            // to retrieve this correctly the right initial height, maxheight, display values etc need to be set (check function), but the
            let t = element.children[0].innerHTML.length;
            console.log(t)
            element.style.height = 50 + "px"; // start expanding
        }
        element.style.overflow = 'hidden';
        window.requestAnimationFrame(step);
      }, 3);
    }
    
    // https://stackoverflow.com/a/29047232/3423843
    function getHeight(el) {
      let el_comp_style = window.getComputedStyle(el),
        el_display    = el_comp_style.display,
        el_max_height = el_comp_style.maxHeight.replace('px', '').replace('%', ''),
        el_position   = el.style.position,
        el_visibility = el.style.visibility,
        wanted_height = 0;
        
        console.log("joehoe", el_max_height, el_display);
        
    
      if (el_display !== 'none' && el_max_height !== '0' && el_max_height !== 'none') {
        return el.offsetHeight;
      }
      
    
      el.style.position   = 'absolute';
      el.style.visibility = 'hidden';
      el.style.display    = 'block';
    
      wanted_height = el.offsetHeight;
    
      el.style.display    = el_display;
      el.style.position   = el_position;
      el.style.visibility = el_visibility;
    
      return wanted_height;
    }  
  </script>
</body>
</html>